#!/usr/bin/env python3
import os
import sys
from pathlib import Path

def rm():
    """Remove file"""
    if len(sys.argv) < 2:
        print("rm: missing operand", file=sys.stderr)
        return 1
        
    filename = sys.argv[1]
    root = Path(os.environ.get('MASHFS_ROOT', 'filesfs')).absolute()
    current_dir = Path(os.environ.get('MASHFS_CWD', str(root))).absolute()
    file_path = current_dir / filename
    
    try:
        if not str(file_path.resolve()).startswith(str(root)):
            print(f"rm: access denied: {filename}", file=sys.stderr)
            return 1
            
        if file_path.is_file():
            file_path.unlink()
            print(f"Removed: {filename}")
            return 0
        else:
            print(f"rm: {filename}: No such file", file=sys.stderr)
            return 1
    except Exception as e:
        print(f"rm: {e}", file=sys.stderr)
        return 1

if __name__ == "__main__":
    sys.exit(rm()) 
