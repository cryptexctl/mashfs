#!/usr/bin/env python3
import os
import sys
from pathlib import Path

def ls():
    """List directory contents"""
    root = Path(os.environ.get('MASHFS_ROOT', 'filesfs')).absolute()
    current_dir = Path(os.environ.get('MASHFS_CWD', str(root))).absolute()
    
    try:
        items = list(current_dir.iterdir())
        items.sort(key=lambda x: (not x.is_dir(), x.name.lower()))
        
        for item in items:
            if item.is_dir():
                print(f"\033[94m{item.name}/\033[0m")
            else:
                print(item.name)
        return 0
    except Exception as e:
        print(f"ls: {e}", file=sys.stderr)
        return 1

if __name__ == "__main__":
    sys.exit(ls()) 